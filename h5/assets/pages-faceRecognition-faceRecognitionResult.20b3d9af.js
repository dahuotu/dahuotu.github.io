import{d as a,a as s,b as t,e,Y as l,a6 as i,ad as c,ae as n,g as o,F as d,G as u,H as r,I as f,O as _,Z as m,_ as g,a0 as v,af as x,N as y,R as k,a8 as p}from"./index.94028eaa.js";import{_ as h}from"./plugin-vue_export-helper.21dcd24c.js";var C="./assets/red.16e6494c.png",b="./assets/detected.b0bcf56a.png";var T=h(a({name:"faceRecognition",components:{},props:{},setup(a,d){const u=s({options:{},timer:null});t((a=>{const{status:s,msg:t}=a;u.options=a,u.status=s,u.msg=t,console.log("初始化",a)})),e((()=>{if(l({success:function(a){u.v1_s=a.statusBarHeight+13}}),1==u.status&&"detecting"==u.msg){u.ctx=i("canvas",this);const a=c();a.select(".detecting .box .canvas").boundingClientRect(),a.exec((function(a){u.canvasWidth=a[0].width,u.canvasHeight=a[0].height,n({src:"/images/green4.png",success:function(a){u.imgWidth=a.width,u.imgHeight=a.height,r()}})})),u.status=1,u.msg="success",clearInterval(u.timer)}})),o((()=>{clearInterval(u.timer)}));const r=()=>{var a=u.ctx,s=u.canvasWidth,t=u.canvasHeight,e=u.imgWidth,l=u.imgHeight,i=200,c=200,n=(s-i)/2,o=(t-c)/2,d=n+20,r=o+15,f=d+160,_=r+170,m=r;u.timer=setInterval((function(){a.setLineWidth(4),a.setStrokeStyle("green"),a.setLineCap("round"),a.moveTo(n,o),a.lineTo(n+30,o),a.moveTo(n,o),a.lineTo(n,o+30),a.moveTo(n+i,o),a.lineTo(n+i-30,o),a.moveTo(n+i,o),a.lineTo(n+i,o+30),a.moveTo(n,o+c),a.lineTo(n,o+c-30),a.moveTo(n,o+c),a.lineTo(n+30,o+c),a.moveTo(n+i,o+c),a.lineTo(n+i,o+c-30),a.moveTo(n+i,o+c),a.lineTo(n+i-30,o+c),-1==u.direction?m-=1:1==u.direction&&(m+=1),m>=_?u.direction=-1:m<=r&&(u.direction=1),a.drawImage("/images/green4.png",(s-e)/2,(t-l)/2,e,l),a.setStrokeStyle("green"),a.setLineWidth(4),a.setLineCap("round"),a.moveTo(d,m),a.lineTo(f,m),a.stroke(),a.draw()}),6)};return{data:u,qx:()=>{clearInterval(u.timer),v({url:"/pages/faceRecognition/faceRecognition?scene="+u.options.originalscene})},tryAgain:()=>{clearInterval(u.timer),v({url:"/pages/faceRecognition/faceRecognition?scene="+u.options.originalscene})}}}}),[["render",function(a,s,t,e,l,i){const c=x,n=y,o=k,v=p;return d(),u(n,{class:"faceRecognition"},{default:r((()=>[0==a.data.status&&"baochi"==a.data.msg?(d(),u(n,{key:0,class:"main baochi"},{default:r((()=>[f(n,{class:"v1",style:m("margin-top:"+a.data.v1_s+"px;")},{default:r((()=>[f(c,{onClick:a.qx},{default:r((()=>[_("取消")])),_:1},8,["onClick"])])),_:1},8,["style"]),f(n,{class:"box"},{default:r((()=>[f(o,{mode:"widthFix",src:C}),f(n,{class:"v2"},{default:r((()=>[_("请尽量保持头部与手机静止")])),_:1})])),_:1}),f(n,{class:"v3"},{default:r((()=>[f(c,{onClick:a.tryAgain},{default:r((()=>[_("再试一次")])),_:1},8,["onClick"])])),_:1})])),_:1})):g("",!0),0==a.data.status&&"chaoshi"==a.data.msg?(d(),u(n,{key:1,class:"main chaoshi"},{default:r((()=>[f(n,{class:"v1",style:m("margin-top:"+a.data.v1_s+"px;")},{default:r((()=>[f(c,{onClick:a.qx},{default:r((()=>[_("返回")])),_:1},8,["onClick"])])),_:1},8,["style"]),f(n,{class:"box"},{default:r((()=>[f(o,{mode:"widthFix",src:C}),f(n,{class:"v2"},{default:r((()=>[_("识别失败，请重试")])),_:1})])),_:1}),f(n,{class:"v3"},{default:r((()=>[f(c,{onClick:a.tryAgain},{default:r((()=>[_("再试一次")])),_:1},8,["onClick"])])),_:1})])),_:1})):g("",!0),1==a.data.status&&"detecting"==a.data.msg?(d(),u(n,{key:2,class:"main detecting"},{default:r((()=>[f(n,{class:"v1",style:m("margin-top:"+a.data.v1_s+"px;")},{default:r((()=>[f(c,{onClick:a.qx},{default:r((()=>[_("取消")])),_:1},8,["onClick"])])),_:1},8,["style"]),f(n,{class:"box",style:{}},{default:r((()=>[f(v,{"canvas-id":"canvas",class:"canvas",style:{}}),f(n,{class:"v2",style:{}},{default:r((()=>[_("识别中")])),_:1})])),_:1})])),_:1})):g("",!0),1==a.data.status&&"systembusy"==a.data.msg?(d(),u(n,{key:3,class:"main systembusy"},{default:r((()=>[f(n,{class:"v1",style:m("margin-top:"+a.data.v1_s+"px;")},{default:r((()=>[f(c,{onClick:a.qx},{default:r((()=>[_("返回")])),_:1},8,["onClick"])])),_:1},8,["style"]),f(n,{class:"box"},{default:r((()=>[f(o,{mode:"widthFix",src:C}),f(n,{class:"v2"},{default:r((()=>[_("系统繁忙，请重试")])),_:1})])),_:1}),f(n,{class:"v3"},{default:r((()=>[f(c,{onClick:a.tryAgain},{default:r((()=>[_("再试一次")])),_:1},8,["onClick"])])),_:1})])),_:1})):g("",!0),1==a.data.status&&"success"==a.data.msg?(d(),u(n,{key:4,class:"main success"},{default:r((()=>[f(n,{class:"v1",style:m("margin-top:"+a.data.v1_s+"px;")},{default:r((()=>[f(c,{onClick:a.qx},{default:r((()=>[_("返回")])),_:1},8,["onClick"])])),_:1},8,["style"]),f(n,{class:"box"},{default:r((()=>[f(o,{mode:"widthFix",src:b}),f(n,{class:"v2"},{default:r((()=>[_("识别成功")])),_:1})])),_:1})])),_:1})):g("",!0),1==a.data.status&&"notReg"==a.data.msg?(d(),u(n,{key:5,class:"main notReg"},{default:r((()=>[f(n,{class:"v1",style:m("margin-top:"+a.data.v1_s+"px;")},{default:r((()=>[f(c,{onClick:a.qx},{default:r((()=>[_("返回")])),_:1},8,["onClick"])])),_:1},8,["style"]),f(n,{class:"box"},{default:r((()=>[f(o,{mode:"widthFix",src:b}),f(n,{class:"v2"},{default:r((()=>[_("您还未绑定")])),_:1})])),_:1})])),_:1})):g("",!0),0==a.data.status&&"networkErr"==a.data.msg?(d(),u(n,{key:6,class:"main networkErr"},{default:r((()=>[f(n,{class:"v1",style:m("margin-top:"+a.data.v1_s+"px;")},{default:r((()=>[f(c,{onClick:a.qx},{default:r((()=>[_("返回")])),_:1},8,["onClick"])])),_:1},8,["style"]),f(n,{class:"box"},{default:r((()=>[f(o,{mode:"widthFix",src:C}),f(n,{class:"v2"},{default:r((()=>[_("网络错误，请重试")])),_:1})])),_:1}),f(n,{class:"v3"},{default:r((()=>[f(c,{onClick:a.tryAgain},{default:r((()=>[_("再试一次")])),_:1},8,["onClick"])])),_:1})])),_:1})):g("",!0),0==a.data.status&&"otherErr"==a.data.msg?(d(),u(n,{key:7,class:"main otherErr"},{default:r((()=>[f(n,{class:"v1",style:m("margin-top:"+a.data.v1_s+"px;")},{default:r((()=>[f(c,{onClick:a.qx},{default:r((()=>[_("返回")])),_:1},8,["onClick"])])),_:1},8,["style"]),f(n,{class:"box"},{default:r((()=>[f(o,{mode:"widthFix",src:C}),f(n,{class:"v2"},{default:r((()=>[_("未知错误，请重试")])),_:1})])),_:1})])),_:1})):g("",!0),1==a.data.status&&"1010"==a.data.msg?(d(),u(n,{key:8,class:"main otherErr"},{default:r((()=>[f(n,{class:"v1",style:m("margin-top:"+a.data.v1_s+"px;")},{default:r((()=>[f(c,{onClick:a.qx},{default:r((()=>[_("返回")])),_:1},8,["onClick"])])),_:1},8,["style"]),f(n,{class:"box"},{default:r((()=>[f(o,{mode:"widthFix",src:C}),f(n,{class:"v2",style:{width:"70%",margin:"auto"}},{default:r((()=>[_("登录失败，账号和人脸信息不匹配")])),_:1})])),_:1}),f(n,{class:"v3"},{default:r((()=>[f(c,{onClick:a.tryAgain},{default:r((()=>[_("再试一次")])),_:1},8,["onClick"])])),_:1})])),_:1})):g("",!0),1==a.data.status&&"deleted"==a.data.msg?(d(),u(n,{key:9,class:"main deleted"},{default:r((()=>[f(n,{class:"v1",style:m("margin-top:"+a.data.v1_s+"px;")},{default:r((()=>[f(c,{onClick:a.qx},{default:r((()=>[_("返回")])),_:1},8,["onClick"])])),_:1},8,["style"]),f(n,{class:"box"},{default:r((()=>[f(o,{mode:"widthFix",src:b}),f(n,{class:"v2"},{default:r((()=>[_("已解除绑定")])),_:1})])),_:1})])),_:1})):g("",!0)])),_:1})}],["__scopeId","data-v-5e040008"]]);export{T as default};
