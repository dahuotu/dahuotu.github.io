import{aE as a,T as e,b5 as s,F as t,K as l,I as o,H as c,G as d,O as i,P as u,_ as n,M as r,L as f,N as m,W as _,ac as h,af as p}from"./index.94028eaa.js";import{B as g}from"./index.baac847b.js";import{E as x}from"./index.15b5045e.js";import{l as y}from"./index.77e75d50.js";import{_ as w}from"./plugin-vue_export-helper.21dcd24c.js";var k=w({components:{BottomBar:g,emptyData:x,loadData:y},onLoad(){console.log("初始化加载=>onLoad"),this.getCallList(),this.getCount()},data:()=>({isLoad:!0,isNoData:!1,pageSize:10,pageTelIndex:1,pageWxIndex:1,pageOemIndex:1,tabType:"tel",companyName:"",telList:[],wxList:[],oemList:[],callCount:{today:0,waitConfirm:0,wxFail:0,wxSuccess:0},wxCount:{todayConfirm:0,totalConfirm:0,wxSuccess:0},workCount:{todayConfirm:0,totalConfirm:0,wxSuccess:0},dialogHide:!1,confirmPeople:{confirmUsername:"",confirmPhone:"",robTime:""}}),methods:{onTab(a){console.log("根据条件切换选项卡=>"),this.tabType=a,"wx"===a?(console.log("根据条件筛选结果=>wx"),this.getWxList()):"oem"===a?(console.log("根据条件筛选结果=>oem"),this.getOemList()):(console.log("根据条件筛选结果=>tel"),this.getCallList())},onSearch(){console.log("根据条件筛选结果=>"),this.companyName.length>0?"wx"===this.tabType?(console.log("根据条件筛选结果=>wx"),this.getWxList()):"oem"===this.tabType?(console.log("根据条件筛选结果=>oem"),this.getOemList()):(console.log("根据条件筛选结果=>tel"),this.getCallList()):e.showMsg("请输入需要搜索的公司名称")},onLookConfirm(a,e,s){console.log("查看确认人=>"),this.confirmPeople.confirmUsername=a,this.confirmPeople.confirmPhone=e,this.confirmPeople.robTime=s,this.dialogHide=!0},onCancel(){this.dialogHide=!1},onCopy(){console.log("复制电话号码=>");let a=this;s({data:a.confirmPeople.confirmPhone,success:function(){console.log("已复制联系电话",a.confirmPeople.confirmPhone),e.showMsg("已复制联系电话")}})},getCallList(){var e;console.log("电话沟通记录列表=>"),this.isLoad=!0,(e={pageNum:this.pageTelIndex,pageSize:this.pageSize,dxCompanyName:this.companyName},a({url:"/sys/app/dx/report/record/call/list",method:"GET",params:e})).then((a=>{console.log("getCallList=>rep=>",a),0===a.code&&(this.telList=a.data.records,this.isNoData=!(a.data.records.length>0),this.isLoad=!1)}))},getWxList(){var e;console.log("微信确认记录列表=>"),this.isLoad=!0,(e={pageNum:this.pageWxIndex,pageSize:this.pageSize,dxCompanyName:this.companyName},a({url:"/sys/app/dx/report/record/wx/list",method:"GET",params:e})).then((a=>{console.log("getWxList=>rep=>",a),0===a.code&&(this.wxList=a.data.records,this.isNoData=!(a.data.records.length>0),this.isLoad=!1)}))},getOemList(){var e;console.log("加工需求确认记录列表=>"),this.isLoad=!0,(e={pageNum:this.pageOemIndex,pageSize:this.pageSize,dxCompanyName:this.companyName},a({url:"/sys/app/dx/report/record/work/list",method:"GET",params:e})).then((a=>{console.log("getOemList=>rep=>",a),0===a.code&&(this.oemList=a.data.records,this.isNoData=!(a.data.records.length>0),this.isLoad=!1)}))},getCount(){console.log("记录统计记录=>"),this.isLoad=!0,a({url:"/sys/app/dx/report/record/count",method:"GET"}).then((a=>{console.log("getCount=>rep=>",a.data),0===a.code&&(this.callCount=a.data.callCount,this.wxCount=a.data.wxCount,this.workCount=a.data.workCount,this.isLoad=!1)}))},loadMore(){console.log("加载更多=>"),"wx"===tabType?(console.log("加载更多=>wx"),this.pageWxIndex=this.pageWxIndex+1,this.getWxList()):"oem"===tabType?(console.log("加载更多=>oem"),this.pageOemIndex=this.pageOemIndex+1,this.getOemList()):(console.log("加载更多=>tel"),this.pageTelIndex=this.pageTelIndex+1,this.getCallList())}}},[["render",function(a,e,s,g,x,y){const w=m,k=_,C=h("loadData"),L=h("emptyData"),T=p,b=h("BottomBar");return t(),l(r,null,[o(w,{class:"page-history"},{default:c((()=>[o(w,{class:"headtabs"},{default:c((()=>["tel"===x.tabType?(t(),d(w,{key:0,class:"li active"},{default:c((()=>[i("电话沟通")])),_:1})):(t(),d(w,{key:1,class:"li",onClick:e[0]||(e[0]=a=>y.onTab("tel"))},{default:c((()=>[i("电话沟通")])),_:1})),"wx"===x.tabType?(t(),d(w,{key:2,class:"li active"},{default:c((()=>[i("微信确认")])),_:1})):(t(),d(w,{key:3,class:"li",onClick:e[1]||(e[1]=a=>y.onTab("wx"))},{default:c((()=>[i("微信确认")])),_:1})),"oem"===x.tabType?(t(),d(w,{key:4,class:"li active"},{default:c((()=>[i("加工需求确认")])),_:1})):(t(),d(w,{key:5,class:"li",onClick:e[2]||(e[2]=a=>y.onTab("oem"))},{default:c((()=>[i("加工需求确认")])),_:1}))])),_:1}),"tel"===x.tabType?(t(),d(w,{key:0,class:"data"},{default:c((()=>[o(w,{class:"li"},{default:c((()=>[o(w,{class:"num"},{default:c((()=>[i(u(x.callCount.today),1)])),_:1}),o(w,{class:"remark"},{default:c((()=>[i("今日拨打")])),_:1})])),_:1}),o(w,{class:"li"},{default:c((()=>[o(w,{class:"num"},{default:c((()=>[i(u(x.callCount.wxSuccess),1)])),_:1}),o(w,{class:"remark"},{default:c((()=>[i("添加成功")])),_:1})])),_:1}),o(w,{class:"li"},{default:c((()=>[o(w,{class:"num"},{default:c((()=>[i(u(x.callCount.wxFail),1)])),_:1}),o(w,{class:"remark"},{default:c((()=>[i("添加失败")])),_:1})])),_:1}),o(w,{class:"li"},{default:c((()=>[o(w,{class:"num"},{default:c((()=>[i(u(x.callCount.waitConfirm),1)])),_:1}),o(w,{class:"remark"},{default:c((()=>[i("待确认")])),_:1})])),_:1})])),_:1})):n("",!0),"wx"===x.tabType?(t(),d(w,{key:1,class:"data"},{default:c((()=>[o(w,{class:"li"},{default:c((()=>[o(w,{class:"num"},{default:c((()=>[i(u(x.wxCount.totalConfirm),1)])),_:1}),o(w,{class:"remark"},{default:c((()=>[i("累计确认")])),_:1})])),_:1}),o(w,{class:"li"},{default:c((()=>[o(w,{class:"num"},{default:c((()=>[i(u(x.wxCount.todayConfirm),1)])),_:1}),o(w,{class:"remark"},{default:c((()=>[i("今日确认")])),_:1})])),_:1}),o(w,{class:"li"},{default:c((()=>[o(w,{class:"num"},{default:c((()=>[i(u(x.wxCount.wxSuccess),1)])),_:1}),o(w,{class:"remark"},{default:c((()=>[i("添加成功")])),_:1})])),_:1})])),_:1})):n("",!0),"oem"===x.tabType?(t(),d(w,{key:2,class:"data"},{default:c((()=>[o(w,{class:"li"},{default:c((()=>[o(w,{class:"num"},{default:c((()=>[i(u(x.workCount.totalConfirm),1)])),_:1}),o(w,{class:"remark"},{default:c((()=>[i("累计确认")])),_:1})])),_:1}),o(w,{class:"li"},{default:c((()=>[o(w,{class:"num"},{default:c((()=>[i(u(x.workCount.todayConfirm),1)])),_:1}),o(w,{class:"remark"},{default:c((()=>[i("今日确认")])),_:1})])),_:1}),o(w,{class:"li"},{default:c((()=>[o(w,{class:"num"},{default:c((()=>[i(u(x.workCount.wxSuccess),1)])),_:1}),o(w,{class:"remark"},{default:c((()=>[i("添加成功")])),_:1})])),_:1})])),_:1})):n("",!0),o(w,{class:"search"},{default:c((()=>[o(w,{class:"form"},{default:c((()=>[o(k,{class:"input",type:"text",placeholder:"搜索公司名称",modelValue:x.companyName,"onUpdate:modelValue":e[3]||(e[3]=a=>x.companyName=a)},null,8,["modelValue"])])),_:1}),o(w,{class:"query",onClick:e[4]||(e[4]=a=>y.onSearch())})])),_:1}),!0===x.isLoad?(t(),d(C,{key:3,msg:"正在铆足劲加载中..."})):n("",!0),"tel"===x.tabType&&x.telList.length>0?(t(),d(w,{key:4,class:"datalist","scroll-y":!0,"lower-threshold":150},{default:c((()=>[(t(!0),l(r,null,f(x.telList,((a,e)=>(t(),d(w,{class:"li",key:e},{default:c((()=>["0"==a.showStatus?(t(),d(w,{key:0,class:"tag-wait"},{default:c((()=>[i("待拨打")])),_:1})):n("",!0),"4"==a.showStatus?(t(),d(w,{key:1,class:"tag-success"},{default:c((()=>[i("添加成功")])),_:1})):n("",!0),"5"==a.showStatus?(t(),d(w,{key:2,class:"tag-error"},{default:c((()=>[i("添加失败")])),_:1})):n("",!0),"6"==a.showStatus?(t(),d(w,{key:3,class:"tag-invalid"},{default:c((()=>[i("无效")])),_:1})):n("",!0),o(w,{class:"title"},{default:c((()=>[i(u(a.dxCompanyName),1)])),_:2},1024),o(w,{class:"rows"},{default:c((()=>[o(w,{class:"text"},{default:c((()=>[i("地区")])),_:1}),o(w,{class:"val"},{default:c((()=>[i(u(a.addrDetail),1)])),_:2},1024)])),_:2},1024),o(w,{class:"rows"},{default:c((()=>[o(w,{class:"text"},{default:c((()=>[i("联系人数")])),_:1}),o(w,{class:"cal"},{default:c((()=>[i(u(a.contactNum),1)])),_:2},1024),o(w,{class:"btn-look",onClick:e=>y.onLookConfirm(a.confirmUsername,a.confirmPhone,a.robTime)},{default:c((()=>[i(" 查看确认人 ")])),_:2},1032,["onClick"])])),_:2},1024),o(w,{class:"rows"},{default:c((()=>[o(w,{class:"text"},{default:c((()=>[i("愿意添加微信")])),_:1}),o(w,{class:"val"},{default:c((()=>[i(u(a.wxNum),1)])),_:2},1024)])),_:2},1024),o(w,{class:"rows"},{default:c((()=>[o(w,{class:"text"},{default:c((()=>[i("近期有加工需求")])),_:1}),o(w,{class:"cal"},{default:c((()=>[i(u(a.needNum),1)])),_:2},1024),o(w,{class:"time"},{default:c((()=>[i(u(a.createTime),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):n("",!0),"wx"===x.tabType&&x.wxList.length>0?(t(),d(w,{key:5,class:"datalist","scroll-y":!0,"lower-threshold":150},{default:c((()=>[(t(!0),l(r,null,f(x.wxList,((a,e)=>(t(),d(w,{class:"li",key:e},{default:c((()=>["1"==a.showStatus?(t(),d(w,{key:0,class:"tag-wait"},{default:c((()=>[i("待确认")])),_:1})):n("",!0),"4"==a.showStatus?(t(),d(w,{key:1,class:"tag-success"},{default:c((()=>[i("添加成功")])),_:1})):n("",!0),"5"==a.showStatus?(t(),d(w,{key:2,class:"tag-error"},{default:c((()=>[i("添加失败")])),_:1})):n("",!0),"6"==a.showStatus?(t(),d(w,{key:3,class:"tag-invalid"},{default:c((()=>[i("无效")])),_:1})):n("",!0),o(w,{class:"title"},{default:c((()=>[i(u(a.dxCompanyName),1)])),_:2},1024),o(w,{class:"rows"},{default:c((()=>[o(w,{class:"text"},{default:c((()=>[i("地区")])),_:1}),o(w,{class:"val"},{default:c((()=>[i(u(a.addrDetail),1)])),_:2},1024)])),_:2},1024),o(w,{class:"rows"},{default:c((()=>[o(w,{class:"text"},{default:c((()=>[i("微信待确认")])),_:1}),o(w,{class:"val"},{default:c((()=>[i(u(a.wxNum),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):n("",!0),"oem"===x.tabType&&x.oemList.length>0?(t(),d(w,{key:6,class:"datalist","scroll-y":!0,"lower-threshold":150},{default:c((()=>[(t(!0),l(r,null,f(x.oemList,((a,e)=>(t(),d(w,{class:"li",key:e},{default:c((()=>["2"==a.showStatus?(t(),d(w,{key:0,class:"tag-wait"},{default:c((()=>[i("待确认")])),_:1})):n("",!0),"7"==a.showStatus?(t(),d(w,{key:1,class:"tag-success"},{default:c((()=>[i("有图纸")])),_:1})):n("",!0),"8"==a.showStatus?(t(),d(w,{key:2,class:"tag-invalid"},{default:c((()=>[i("无图纸")])),_:1})):n("",!0),o(w,{class:"title"},{default:c((()=>[i(u(a.dxCompanyName),1)])),_:2},1024),o(w,{class:"rows"},{default:c((()=>[o(w,{class:"text"},{default:c((()=>[i("地区")])),_:1}),o(w,{class:"val"},{default:c((()=>[i(u(a.addrDetail),1)])),_:2},1024)])),_:2},1024),o(w,{class:"rows"},{default:c((()=>[o(w,{class:"text"},{default:c((()=>[i("图纸待确认")])),_:1}),o(w,{class:"val"},{default:c((()=>[i(u(a.needNum),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):n("",!0),!0===x.isNoData?(t(),d(L,{key:7,msg:"暂无记录"})):n("",!0)])),_:1}),!0===x.dialogHide?(t(),d(w,{key:0,class:"dialog"},{default:c((()=>[o(w,{class:"content"},{default:c((()=>[o(w,{class:"title"},{default:c((()=>[i("查看确认人")])),_:1}),o(w,{class:"form"},{default:c((()=>[o(w,{class:"rows"},{default:c((()=>[o(w,{class:"text"},{default:c((()=>[i("确认人")])),_:1}),o(w,{class:"val"},{default:c((()=>[i(u(x.confirmPeople.name),1)])),_:1})])),_:1}),o(w,{class:"rows"},{default:c((()=>[o(w,{class:"text"},{default:c((()=>[i("联系电话")])),_:1}),o(w,{class:"val"},{default:c((()=>[i(u(x.confirmPeople.tel),1),o(T,{class:"copy",onClick:e[5]||(e[5]=a=>y.onCopy())},{default:c((()=>[i("复制")])),_:1})])),_:1})])),_:1}),o(w,{class:"rows"},{default:c((()=>[o(w,{class:"text"},{default:c((()=>[i("抢单时间")])),_:1}),o(w,{class:"val"},{default:c((()=>[i(u(x.confirmPeople.orderTime),1)])),_:1})])),_:1})])),_:1}),o(w,{class:"group"},{default:c((()=>[o(w,{class:"ok",onClick:e[6]||(e[6]=a=>y.onCancel())},{default:c((()=>[i("确定")])),_:1})])),_:1})])),_:1})])),_:1})):n("",!0),o(b,{active:"record"})],64)}],["__scopeId","data-v-f16e9978"]]);export{k as default};
