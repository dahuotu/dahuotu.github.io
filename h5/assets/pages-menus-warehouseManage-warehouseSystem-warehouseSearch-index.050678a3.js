import{d as e,a,z as t,ad as r,ag as s,T as l,at as i,F as o,G as n,H as g,I as u,_ as h,O as m,P as c,Z as p,aj as P,as as y,av as f,ap as d,aq as L,N as M,ac as S,S as v}from"./index.94028eaa.js";import{_ as w}from"./uni-search-bar.f5b39437.js";import{e as D,_ as b}from"./empty.9ee9749b.js";import{i as _}from"./inventoryPageList.5591ae4a.js";import{m as C}from"./materialManagerDetailList.8efcca6a.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";import"./uni-icons.29799ac0.js";var R=N(e({name:"warehouseSearch",components:{empty:D,inventoryPageList:_,materialManagerDetailList:C},props:{type:{type:String,default:""}},setup(e,o){const n=P(),g=a({topHeight:"",type:Number(e.type)});t((()=>{r().select(".top-content").boundingClientRect((function(e){g.topHeight=e.height})).exec()}));const u=s((()=>n.state.warehouseManage.warehouseSystem.inventoryPageListSearchPage)),h=s((()=>n.state.warehouseManage.warehouseSystem.materialManagerDetailListSearchPage)),m=s((()=>n.state.warehouseManage.warehouseSystem.inventoryPageListPage)),c=s((()=>n.state.warehouseManage.warehouseSystem.materialManagerDetailListPage)),p=e=>{n.dispatch(`warehouseManage/warehouseSystem/${y.InitSearchPageList}`,e)},d=e=>n.dispatch(`warehouseManage/warehouseSystem/${y.InventoryPageListForMobilePage}`,e),L=e=>n.dispatch(`warehouseManage/warehouseSystem/${y.GetMaterialManagerDetailListMobilePage}`,e);return p(),{Tool:l,inventoryPageListSearchPage:u,materialManagerDetailListSearchPage:h,inventoryPageListPage:m,materialManagerDetailListPage:c,initSearchPageList:p,inventoryPageListForMobilePage:d,getMaterialManagerDetailListMobilePage:L,scrolltolower:e=>{if(0==g.type){let e=u.value.pageNum,a=u.value.pageSize,t=m.value.total;Math.ceil(t/a)>=e&&(e++,d({pageNum:e}))}else{let e=h.value.pageNum,a=h.value.pageSize,t=c.value.total;Math.ceil(t/a)>=e&&(e++,L({pageNum:e}))}},onPulling:e=>{0==g.type?n.commit(`warehouseManage/warehouseSystem/${f.UpdateInventoryPageListPage}`,{refresherStatus:!0}):n.commit(`warehouseManage/warehouseSystem/${f.UpdateMaterialManagerDetailListPage}`,{refresherStatus:!0})},onRefresh:e=>{0==g.type?d({pageNum:1}):L({pageNum:1})},clearSearch:e=>{0==g.type?d({materialCode:"",pageNum:1}):L({materialCodeParam:"",pageNum:1})},...i(g)}}}),[["render",function(e,a,t,r,s,l){const i=d(L("uni-search-bar"),w),P=M,y=S("inventoryPageList"),f=S("empty"),D=d(L("uni-load-more"),b),_=v,C=S("materialManagerDetailList");return o(),n(P,{class:"main"},{default:g((()=>[u(P,{class:"top-content"},{default:g((()=>[0==e.type?(o(),n(P,{key:0,class:"search"},{default:g((()=>[u(i,{onConfirm:a[0]||(a[0]=a=>e.inventoryPageListForMobilePage({pageNum:1})),modelValue:e.inventoryPageListSearchPage.materialCode,"onUpdate:modelValue":a[1]||(a[1]=a=>e.inventoryPageListSearchPage.materialCode=a),onClear:a[2]||(a[2]=a=>e.clearSearch()),bgColor:"#F5F5F5",cancelButton:"none",placeholder:"搜索"},null,8,["modelValue"])])),_:1})):h("",!0),1==e.type?(o(),n(P,{key:1,class:"search"},{default:g((()=>[u(i,{onConfirm:a[3]||(a[3]=a=>e.getMaterialManagerDetailListMobilePage({pageNum:1})),modelValue:e.materialManagerDetailListSearchPage.materialCodeParam,"onUpdate:modelValue":a[4]||(a[4]=a=>e.materialManagerDetailListSearchPage.materialCodeParam=a),onClear:e.clearSearch,bgColor:"#F5F5F5",cancelButton:"none",placeholder:"搜索"},null,8,["modelValue","onClear"])])),_:1})):h("",!0),u(P,{class:"result"},{default:g((()=>[m(" 搜索结果共"+c(0==e.type?e.inventoryPageListPage.total:e.materialManagerDetailListPage.total)+"条 ",1)])),_:1})])),_:1}),0==e.type?(o(),n(_,{key:0,"scroll-y":"",class:"list",style:p("height:calc(100% - "+e.topHeight+"px)"),onScrolltolower:e.scrolltolower,"refresher-enabled":!0,"refresher-triggered":e.inventoryPageListPage.refresherStatus,"scroll-top":e.inventoryPageListPage.viewTop,onRefresherpulling:e.onPulling,onRefresherrefresh:e.onRefresh},{default:g((()=>[u(P,{class:"warehouse-list"},{default:g((()=>[u(y,{inventoryPageList:e.inventoryPageListPage.list},null,8,["inventoryPageList"])])),_:1}),0==e.inventoryPageListPage.total?(o(),n(f,{key:0})):h("",!0),0!=e.inventoryPageListPage.total?(o(),n(D,{key:1,status:e.inventoryPageListPage.moreStatus},null,8,["status"])):h("",!0)])),_:1},8,["style","onScrolltolower","refresher-triggered","scroll-top","onRefresherpulling","onRefresherrefresh"])):h("",!0),1==e.type?(o(),n(_,{key:1,"scroll-y":"",class:"list",style:p("height:calc(100% - "+e.topHeight+"px)"),onScrolltolower:e.scrolltolower,"refresher-enabled":!0,"refresher-triggered":e.materialManagerDetailListPage.refresherStatus,"scroll-top":e.materialManagerDetailListPage.viewTop,onRefresherpulling:e.onPulling,onRefresherrefresh:e.onRefresh},{default:g((()=>[u(P,{class:"warehouse-list"},{default:g((()=>[u(C,{materialManagerDetailList:e.materialManagerDetailListPage.list},null,8,["materialManagerDetailList"])])),_:1}),0==e.materialManagerDetailListPage.total?(o(),n(f,{key:0})):h("",!0),0!=e.materialManagerDetailListPage.total?(o(),n(D,{key:1,status:e.materialManagerDetailListPage.moreStatus},null,8,["status"])):h("",!0)])),_:1},8,["style","onScrolltolower","refresher-triggered","scroll-top","onRefresherpulling","onRefresherrefresh"])):h("",!0)])),_:1})}],["__scopeId","data-v-0966b941"]]);export{R as default};
