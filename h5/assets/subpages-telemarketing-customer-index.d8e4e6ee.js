import{T as e,F as t,K as a,I as s,H as l,G as o,O as c,M as i,L as n,_ as d,ar as r,W as u,N as y,ac as h,S as f,P as g}from"./index.94028eaa.js";import{B as m}from"./index.baac847b.js";import{l as p}from"./index.77e75d50.js";import{g as _,a as k,b as L,c as b}from"./index.b8622cd4.js";import{_ as C}from"./plugin-vue_export-helper.21dcd24c.js";var S=C({components:{BottomBar:m,loadData:p},onLoad(){console.log("初始化加载=>onLoad"),this.isLoad=!0,this.getIndustry(),this.getArea(),this.getCompany()},onReachBottom(){console.log("onReachBottom=>"),this.loadMore()},data:()=>({isLoad:!0,isNoData:!1,pageSize:10,pageIndex:1,accountState:"",selectLayer:"",selectLayerType:"",industryList:[],areaList:[],robDialog:"",customerList:[],robState:"",industry:"",province:"",city:"",companyName:"",orderId:""}),methods:{getArea(){_().then((e=>{console.log("getProvinceCityDistrictID=>",e),0===e.code&&(this.areaList=e.data.provinceCityDistrict)}))},getIndustry(){k().then((e=>{console.log("getCompanyIndustry=>",e),0===e.code&&(this.industryList=e.data)}))},getCompany(){this.isLoad=!0;let e={pageNum:this.pageIndex,pageSize:this.pageSize,name:this.companyName,industry:this.industry,province:this.province,city:this.city};L(e).then((e=>{console.log("getCompanyList=>",e),0===e.code&&(this.accountState="",this.customerList=this.customerList.concat(e.data.records),this.isNoData=!(e.data.records.length>0),this.isLoad=!1)}))},onRob(e,t){console.log("未接单去接单ID=>",e,"status=>",t),"2"==t?this.robState="2":b({id:e}).then((e=>{console.log("getCompanyTake()=>rep=>",e),0==e.code?(this.robState="0",this.orderId=e.data):this.robState="2"})),this.onShowDialog()},onDetail(t){console.log("已接单查看详情ID=>",t),e.navigateTo("customerDetails?&id="+t)},onShowDialog(){this.robDialog="rob"},onCloseDialog(){this.robDialog="","0"==this.robState?(this.robState="",e.navigateTo("customerDetails?&id="+this.orderId)):this.robState=""},onSelectLayerType(e){console.log("选择行业还是地区=>",e),this.selectLayerType=e,this.selectLayer="show",document.body.style.overflow="hidden"},onCloseSelectLayer(){console.log("关闭选择行业还是地区弹层=>"),this.selectLayerType="",this.selectLayer="",this.industry="",this.province="",this.city="",document.body.style.overflow=""},onOkSelectLayer(){console.log("选择行业或者地区确认=>"),this.selectLayerType="",this.selectLayer="",this.getCompany()},onIndustry(e){console.log("选择行业=>",e),this.industry=e},onCity(e,t){console.log("选择省=>",e,"选择城市=>",t),this.province=e,this.city=t},onSearch(){console.log("去搜索=>"),this.getCompany()},loadMore(){console.log("加载更多=>"),this.pageIndex=this.pageIndex+1,this.getCompany()}}},[["render",function(e,m,p,_,k,L){const b=u,C=y,S=h("loadData"),v=f,D=h("BottomBar");return t(),a(i,null,[s(C,{class:"page-customer-list"},{default:l((()=>[s(C,{class:"search"},{default:l((()=>[s(b,{class:"input",type:"text",placeholder:"搜索公司名称",modelValue:k.companyName,"onUpdate:modelValue":m[0]||(m[0]=e=>k.companyName=e),"confirm-type":"search",onConfirm:m[1]||(m[1]=e=>L.onSearch())},null,8,["modelValue"])])),_:1}),s(C,{class:"select-layer"},{default:l((()=>["industry"==k.selectLayerType?(t(),o(C,{key:0,class:"li active"},{default:l((()=>[c("选择行业")])),_:1})):(t(),o(C,{key:1,class:"li",onClick:m[2]||(m[2]=e=>L.onSelectLayerType("industry"))},{default:l((()=>[c("选择行业")])),_:1})),"area"==k.selectLayerType?(t(),o(C,{key:2,class:"li active"},{default:l((()=>[c("选择地区")])),_:1})):(t(),o(C,{key:3,class:"li",onClick:m[3]||(m[3]=e=>L.onSelectLayerType("area"))},{default:l((()=>[c("选择地区")])),_:1}))])),_:1}),"show"===k.selectLayer?(t(),o(C,{key:0,class:"select-layer-dialog"},{default:l((()=>[k.industryList.length>0&&"industry"==k.selectLayerType?(t(),o(C,{key:0,class:"data"},{default:l((()=>[(t(!0),a(i,null,n(k.industryList,((e,a)=>(t(),o(C,{class:r(e==k.industry?"li chk":"li"),key:a,onClick:t=>L.onIndustry(e)},{default:l((()=>[c(g(e),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})):d("",!0),k.areaList.length>0&&"area"==k.selectLayerType?(t(),o(C,{key:1,class:"data"},{default:l((()=>[(t(!0),a(i,null,n(k.areaList,((e,d)=>(t(),o(C,{class:"rows",key:d},{default:l((()=>[s(C,{class:"province"},{default:l((()=>[c(g(e.name),1)])),_:2},1024),s(C,{class:"city-list"},{default:l((()=>[(t(!0),a(i,null,n(e.children,((a,s)=>(t(),o(C,{class:r(a.code==k.city?"lc chk":"lc"),key:s,onClick:t=>L.onCity(e.code,a.code)},{default:l((()=>[c(g(a.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})):d("",!0),s(C,{class:"opt"},{default:l((()=>[s(C,{class:"li"},{default:l((()=>[s(C,{class:"btn-reset",onClick:m[4]||(m[4]=e=>L.onCloseSelectLayer())},{default:l((()=>[c("关闭")])),_:1})])),_:1}),s(C,{class:"li"},{default:l((()=>[s(C,{class:r(""!=k.industry||""!=k.city?"btn-ok":"btn-stop"),onClick:m[5]||(m[5]=e=>L.onOkSelectLayer())},{default:l((()=>[c("确认")])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})):d("",!0),!0===k.isLoad?(t(),o(S,{key:1,msg:"正在铆足劲加载中..."})):d("",!0),"lock"===k.accountState?(t(),o(C,{key:2,class:"disable"},{default:l((()=>[s(C,{class:"img"}),s(C,{class:"text"},{default:l((()=>[c("您的账号已被冻结，暂时不能接单，相关问题请联系客服！")])),_:1}),s(C,{class:"tel"},{default:l((()=>[c("客服电话：0755-88888888")])),_:1})])),_:1})):d("",!0),"unrole"===k.accountState?(t(),o(C,{key:3,class:"disable"},{default:l((()=>[s(C,{class:"img"}),s(C,{class:"text"},{default:l((()=>[c("暂无相关权限，请联系客服咨询！")])),_:1}),s(C,{class:"tel"},{default:l((()=>[c("客服电话：0755-88888888")])),_:1})])),_:1})):k.customerList.length>0?(t(),o(v,{key:4,class:"datalist","scroll-y":!0,"lower-threshold":150},{default:l((()=>[(t(!0),a(i,null,n(k.customerList,((e,a)=>(t(),o(C,{class:"li",key:a},{default:l((()=>[s(C,{class:"title"},{default:l((()=>[c(g(e.name),1)])),_:2},1024),s(C,{class:"rows"},{default:l((()=>[s(C,{class:"text"},{default:l((()=>[c("地区")])),_:1}),s(C,{class:"val"},{default:l((()=>[c(g(e.addrDetail),1)])),_:2},1024)])),_:2},1024),s(C,{class:"rows"},{default:l((()=>[s(C,{class:"text"},{default:l((()=>[c("联系人数")])),_:1}),s(C,{class:"val"},{default:l((()=>[c(g(e.contactNum),1)])),_:2},1024)])),_:2},1024),"0"==e.receiveStatus?(t(),o(C,{key:0,class:"btn-rob",onClick:t=>L.onRob(e.id,e.receiveStatus)},{default:l((()=>[c("接单 ")])),_:2},1032,["onClick"])):d("",!0),"2"==e.receiveStatus?(t(),o(C,{key:1,class:"btn-rob",onClick:t=>L.onRob(e.id,e.receiveStatus)},{default:l((()=>[c("接单 ")])),_:2},1032,["onClick"])):d("",!0),"1"==e.receiveStatus?(t(),o(C,{key:2,class:"btn-confirm",onClick:t=>L.onDetail(e.lastTakeOrderId)},{default:l((()=>[c("查看详情 ")])),_:2},1032,["onClick"])):d("",!0)])),_:2},1024)))),128))])),_:1})):d("",!0),!0===k.isNoData?(t(),o(C,{key:5,class:"empty"},{default:l((()=>[s(C,{class:"img"}),s(C,{class:"text"},{default:l((()=>[c("暂无客户，请稍后刷新页面")])),_:1})])),_:1})):d("",!0)])),_:1}),"rob"==k.robDialog?(t(),o(C,{key:0,class:"dialog"},{default:l((()=>[s(C,{class:"content"},{default:l((()=>["2"==k.robState?(t(),a(i,{key:0},[s(C,{class:"title"},{default:l((()=>[c("领取提示")])),_:1}),s(C,{class:"desc"},{default:l((()=>[c("已到达当日联系客户上限，请明天再来吧！！")])),_:1})],64)):(t(),a(i,{key:1},[s(C,{class:"title"},{default:l((()=>[c("接单成功")])),_:1}),s(C,{class:"desc"},{default:l((()=>[c("恭喜接单成功，把握机会！")])),_:1})],64)),s(C,{class:"group"},{default:l((()=>[s(C,{class:"ok",onClick:m[6]||(m[6]=e=>L.onCloseDialog())},{default:l((()=>[c("确定")])),_:1})])),_:1})])),_:1})])),_:1})):d("",!0),s(D,{active:"customer"})],64)}],["__scopeId","data-v-11d432db"]]);export{S as default};
